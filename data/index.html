<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa CPFL</title>
    <link href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://unpkg.com/@tmcw/togeojson@4.2.0/dist/togeojson.umd.js"></script>
</head>
<body>
    <div id="map"></div>

    <!-- Menu Principal -->
    <div class="menu">
        <button id="btnKMZ" title="Carregar KMZ/KML"><img src="icons/upload.svg" alt="Upload"></button>
        <button id="btnUploadSupabase" title="Upload Supabase"><img src="icons/cloud-upload.svg" alt="Upload Supabase"></button>
        <button id="btnCarregarProximos" title="Carregar em 20km"><img src="icons/nearby.svg" alt="Carregar Próximos"></button>
        <button id="btnToggleMarkers" title="Exibir/Ocultar Marcadores"><img src="icons/marker.svg" alt="Marcadores"></button>
        <button id="btnToggleNames" title="Exibir/Ocultar Nomes"><img src="icons/label.svg" alt="Nomes"></button>
        <button id="btnToggleLines" title="Exibir/Ocultar Linhas"><img src="icons/line.svg" alt="Linhas"></button>
        <button id="btnReset" title="Resetar Visão"><img src="icons/reset.svg" alt="Reset"></button>
        <button id="btnLocation" title="Minha Localização"><img src="icons/location.svg" alt="Localização"></button>
        <button id="btnLineGroups" title="Grupos de Linhas"><img src="icons/layers.svg" alt="Grupos"></button>
        <button id="btnLoadedFiles" title="Arquivos Carregados"><img src="icons/files.svg" alt="Arquivos"></button>
        <button id="btnStyles" title="Estilos do Mapa"><img src="icons/style.svg" alt="Estilos"></button>
    </div>

    <!-- Barra de Busca -->
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Buscar no mapa...">
        <button id="btnSearch">Buscar</button>
    </div>

    <!-- Resultados da Busca -->
    <div id="searchResults" class="search-results"></div>

    <!-- Menus -->
    <div id="kmzMenu" class="kmz-menu">
        <ul id="kmzList">
            <li><input type="file" id="kmzInput" accept=".kml,.kmz" onchange="document.getElementById('kmzForm').submit()">Selecionar do dispositivo...</li>
        </ul>
    </div>
    <div id="lineMenu" class="line-menu">
        <div class="line-menu-header">
            <button>Ocultar Todas</button>
            <button>Exibir Todas</button>
        </div>
        <ul id="lineGroupsList"></ul>
    </div>
    <div id="loadedFilesMenu" class="loaded-files-menu">
        <ul id="loadedFilesList"></ul>
    </div>
    <div id="styleMenu" class="style-menu">
        <ul id="styleList"></ul>
    </div>

    <!-- Footer -->
    <footer>
        Todos direitos reservados a Lucas Teixeira<br>
        <span id="last-update">Última atualização: 2025-06-08 20:10:21</span>
    </footer>

    <script type="module">
        import { initializeApp } from './app.js';
        window.addEventListener('DOMContentLoaded', () => { initializeApp(); });
    </script>
</body>
</html>
